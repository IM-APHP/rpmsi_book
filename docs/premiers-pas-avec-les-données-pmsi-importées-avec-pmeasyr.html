<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Premiers pas avec les données PMSI importées avec pmeasyr | Analyser les données PMSI avec R</title>
  <meta name="description" content="Ce livre numérique a pour objectif de vous faire découvrir comment le logiciel R pour vous permettre d’analyser efficacement les données PMSI. La première partie comprend une introduction rapide au language de programmation R avec l’apport des packages de la collection tidyverse. De part son utilité, nous avons également fait un rapide rappel de l’utilisation du logiciel git pour organiser le partage du code informatiquje. La suite du livre comprend une introduction à l’utilisation du package pmesayr qui ne remplace pas la lecture de l’excellent livre de Guillaume. Enfin, nous montrerons par l’exemple comment réaliser des projets d’analyse des données PMSI avec R" />
  <meta name="generator" content="bookdown 0.24.3 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Premiers pas avec les données PMSI importées avec pmeasyr | Analyser les données PMSI avec R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/cover.png" />
  <meta property="og:description" content="Ce livre numérique a pour objectif de vous faire découvrir comment le logiciel R pour vous permettre d’analyser efficacement les données PMSI. La première partie comprend une introduction rapide au language de programmation R avec l’apport des packages de la collection tidyverse. De part son utilité, nous avons également fait un rapide rappel de l’utilisation du logiciel git pour organiser le partage du code informatiquje. La suite du livre comprend une introduction à l’utilisation du package pmesayr qui ne remplace pas la lecture de l’excellent livre de Guillaume. Enfin, nous montrerons par l’exemple comment réaliser des projets d’analyse des données PMSI avec R" />
  <meta name="github-repo" content="IM-APHP/rpmsi_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Premiers pas avec les données PMSI importées avec pmeasyr | Analyser les données PMSI avec R" />
  
  <meta name="twitter:description" content="Ce livre numérique a pour objectif de vous faire découvrir comment le logiciel R pour vous permettre d’analyser efficacement les données PMSI. La première partie comprend une introduction rapide au language de programmation R avec l’apport des packages de la collection tidyverse. De part son utilité, nous avons également fait un rapide rappel de l’utilisation du logiciel git pour organiser le partage du code informatiquje. La suite du livre comprend une introduction à l’utilisation du package pmesayr qui ne remplace pas la lecture de l’excellent livre de Guillaume. Enfin, nous montrerons par l’exemple comment réaliser des projets d’analyse des données PMSI avec R" />
  <meta name="twitter:image" content="/cover.png" />

<meta name="author" content="Rémi Flicoteaux" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="language-r-les-fondamentaux.html"/>
<link rel="next" href="pmeasyr-imports-mco.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Analyser les données PMSI avec R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bienvenu</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#les-notions-et-concepts-que-vous-aller-acquérir"><i class="fa fa-check"></i><b>1.1</b> Les notions et concepts que vous aller acquérir</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="language-r-les-fondamentaux.html"><a href="language-r-les-fondamentaux.html"><i class="fa fa-check"></i><b>2</b> Language R : les fondamentaux</a>
<ul>
<li class="chapter" data-level="2.1" data-path="language-r-les-fondamentaux.html"><a href="language-r-les-fondamentaux.html#instructions"><i class="fa fa-check"></i><b>2.1</b> Instructions</a></li>
<li class="chapter" data-level="2.2" data-path="language-r-les-fondamentaux.html"><a href="language-r-les-fondamentaux.html#objets"><i class="fa fa-check"></i><b>2.2</b> Objets</a></li>
<li class="chapter" data-level="2.3" data-path="language-r-les-fondamentaux.html"><a href="language-r-les-fondamentaux.html#fonctions"><i class="fa fa-check"></i><b>2.3</b> Fonctions</a></li>
<li class="chapter" data-level="2.4" data-path="language-r-les-fondamentaux.html"><a href="language-r-les-fondamentaux.html#le-format-des-objets"><i class="fa fa-check"></i><b>2.4</b> Le format des objets</a></li>
<li class="chapter" data-level="2.5" data-path="language-r-les-fondamentaux.html"><a href="language-r-les-fondamentaux.html#la-grammaire-dplyr"><i class="fa fa-check"></i><b>2.5</b> La grammaire dplyr</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html"><i class="fa fa-check"></i><b>3</b> Premiers pas avec les données PMSI importées avec pmeasyr</a>
<ul>
<li class="chapter" data-level="3.1" data-path="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#import-des-données-mco"><i class="fa fa-check"></i><b>3.1</b> Import des données MCO</a></li>
<li class="chapter" data-level="3.2" data-path="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#premières-analyses"><i class="fa fa-check"></i><b>3.2</b> Premières analyses</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pmeasyr-imports-mco.html"><a href="pmeasyr-imports-mco.html"><i class="fa fa-check"></i><b>4</b> pmeasyr : Imports MCO</a>
<ul>
<li class="chapter" data-level="4.1" data-path="pmeasyr-imports-mco.html"><a href="pmeasyr-imports-mco.html#les-différents-fichiers-à-importer"><i class="fa fa-check"></i><b>4.1</b> Les différents fichiers à importer</a></li>
<li class="chapter" data-level="4.2" data-path="pmeasyr-imports-mco.html"><a href="pmeasyr-imports-mco.html#noyau-pmeasyr"><i class="fa fa-check"></i><b>4.2</b> Noyau pmeasyr</a></li>
<li class="chapter" data-level="4.3" data-path="pmeasyr-imports-mco.html"><a href="pmeasyr-imports-mco.html#imports-des-rsa"><i class="fa fa-check"></i><b>4.3</b> Imports des RSA</a></li>
<li class="chapter" data-level="4.4" data-path="pmeasyr-imports-mco.html"><a href="pmeasyr-imports-mco.html#import-des-rum"><i class="fa fa-check"></i><b>4.4</b> Import des RUM</a></li>
<li class="chapter" data-level="4.5" data-path="pmeasyr-imports-mco.html"><a href="pmeasyr-imports-mco.html#import-des-fichiers-tra-et-ano"><i class="fa fa-check"></i><b>4.5</b> Import des fichiers TRA et ANO</a></li>
<li class="chapter" data-level="4.6" data-path="pmeasyr-imports-mco.html"><a href="pmeasyr-imports-mco.html#table-pmeasyr-des-formats"><i class="fa fa-check"></i><b>4.6</b> Table pmeasyr des formats</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="pmeasyr-imports-mco.html"><a href="pmeasyr-imports-mco.html#récupérer-des-référentiels-sur-referime"><i class="fa fa-check"></i><b>4.6.1</b> Récupérer des référentiels sur referime</a></li>
<li class="chapter" data-level="4.6.2" data-path="pmeasyr-imports-mco.html"><a href="pmeasyr-imports-mco.html#fichier-descriptif-des-uma-sur-referime"><i class="fa fa-check"></i><b>4.6.2</b> Fichier descriptif des UMA sur referime</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="pmeasyr-imports-mco.html"><a href="pmeasyr-imports-mco.html#création-dune-table-contenant-la-plus-part-des-informations-utiles"><i class="fa fa-check"></i><b>4.7</b> Création d’une table contenant la plus part des informations utiles</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pmeasyr-imports-mco-dans-une-base-de-données.html"><a href="pmeasyr-imports-mco-dans-une-base-de-données.html"><i class="fa fa-check"></i><b>5</b> pmeasyr : Imports MCO dans une base de données</a>
<ul>
<li class="chapter" data-level="5.0.1" data-path="pmeasyr-imports-mco-dans-une-base-de-données.html"><a href="pmeasyr-imports-mco-dans-une-base-de-données.html#installation-de-la-librarie-duckdb-pour-r"><i class="fa fa-check"></i><b>5.0.1</b> Installation de la librarie duckdb pour R</a></li>
<li class="chapter" data-level="5.0.2" data-path="pmeasyr-imports-mco-dans-une-base-de-données.html"><a href="pmeasyr-imports-mco-dans-une-base-de-données.html#création-dune-connexion"><i class="fa fa-check"></i><b>5.0.2</b> Création d’une connexion</a></li>
<li class="chapter" data-level="5.0.3" data-path="pmeasyr-imports-mco-dans-une-base-de-données.html"><a href="pmeasyr-imports-mco-dans-une-base-de-données.html#imports-pmeaysr"><i class="fa fa-check"></i><b>5.0.3</b> Imports pmeaysr</a></li>
<li class="chapter" data-level="5.0.4" data-path="pmeasyr-imports-mco-dans-une-base-de-données.html"><a href="pmeasyr-imports-mco-dans-une-base-de-données.html#création-dune-requêtes-complexe"><i class="fa fa-check"></i><b>5.0.4</b> Création d’une requêtes complexe</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analyser les données PMSI avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Premiers pas avec les données PMSI importées avec pmeasyr</h1>
<div id="import-des-données-mco" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Import des données MCO</h2>
<p>La première étape de choisir un répertoire de travail et d’enregistrer vos fichiers de remontées dans ce répertoire. Nosu prendrons ici les recommandations de Guillaume : <code>'~/Documents/data/mco</code> .</p>
<p>Les noms des fichiers en sortie de GENRSA sont de la forme :</p>
<ul>
<li>finess.annee.mois.date_et_heure_de_creation.in.zip</li>
<li>finess.annee.mois.date_et_heure_de_creation.out.zip</li>
</ul>
<p>Ensuite on dézippe l’archive avec la fonction adzip :</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb50-1" aria-hidden="true" tabindex="-1"></a>pmeasyr<span class="sc">::</span><span class="fu">adezip</span>(<span class="at">finess =</span> <span class="dv">750712184</span>, </span>
<span id="cb50-2"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb50-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">annee =</span> <span class="dv">2021</span>, </span>
<span id="cb50-3"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb50-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">mois =</span> <span class="dv">8</span>, </span>
<span id="cb50-4"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb50-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">path =</span> <span class="st">&#39;C:/Users/3056269/Documents/data/mco&#39;</span>, </span>
<span id="cb50-5"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb50-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">liste =</span> <span class="fu">c</span>(<span class="st">&quot;rss&quot;</span>), </span>
<span id="cb50-6"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb50-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">type =</span> <span class="st">&quot;in&quot;</span>)</span></code></pre></div>
<p>Import des rsa :</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb51-1" aria-hidden="true" tabindex="-1"></a>pmeasyr<span class="sc">::</span><span class="fu">irum</span>(<span class="at">finess =</span> <span class="dv">750712184</span>, </span>
<span id="cb51-2"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb51-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">annee =</span> <span class="dv">2021</span>, </span>
<span id="cb51-3"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb51-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">mois =</span> <span class="dv">8</span>, </span>
<span id="cb51-4"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb51-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">path =</span> <span class="st">&#39;C:/Users/3056269/Documents/data/mco&#39;</span>, </span>
<span id="cb51-5"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb51-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">typi =</span> <span class="dv">4</span>, </span>
<span id="cb51-6"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb51-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">tolower_names =</span> <span class="cn">TRUE</span> ) <span class="ot">-&gt;</span> rum21</span></code></pre></div>
<p>L’import a créé plusiseurs dataframe qui sont rangé dans l’objet rsa21 qui est une liste :</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(rum21)</span>
<span id="cb52-2"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(rum21)</span></code></pre></div>
</div>
<div id="premières-analyses" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Premières analyses</h2>
<p>Dans cette première partie nous allons tester différents calcul sur les RSA avec le formalisme de dplyr. Commençons par charger le package de façon à ne pas avoir à repéter le préfix <code>dplyr::</code> :</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>Sélectionner les rum dont le diagnostic est I10 :</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb54-1" aria-hidden="true" tabindex="-1"></a>rum21<span class="sc">$</span>rum <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dp <span class="sc">==</span> <span class="st">&quot;I10&quot;</span>)</span></code></pre></div>
<p>Sélectionner les rum dont le diagnostic est I10 et changer le format de la date pour avoir le mois de sortie.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb55-1" aria-hidden="true" tabindex="-1"></a>rum21<span class="sc">$</span>rum <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dp <span class="sc">==</span> <span class="st">&quot;I10&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-2"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moissor =</span> <span class="fu">format</span>(d8soue,<span class="st">&quot;%m&quot;</span>)  )</span></code></pre></div>
<p><img src="docs/formats_date.jpg" /><!-- --></p>
<p>On peut donc changer le format d’une date en R avec la fonction <code>format</code>. Ci dessus les principaux type de format utilisés.</p>
<p>Sélectionner les rum dont le diagnostic est I10 et compter le nombre de résumé par mois, fonction <code>n()</code> permet de compte le nombre de ligne dans le tableau de données, ici groupé par mois :</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb56-1" aria-hidden="true" tabindex="-1"></a>rum21<span class="sc">$</span>rum <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dp <span class="sc">==</span> <span class="st">&quot;I10&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moissor =</span> <span class="fu">format</span>(d8soue,<span class="st">&quot;%m&quot;</span>)  ) <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(moissor) <span class="sc">%&gt;%</span></span>
<span id="cb56-4"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nb =</span> <span class="fu">n</span>())</span></code></pre></div>
<p>Créer une table qui permette d’avoir la date d’entrée et de sortie du séjour :</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb57-1" aria-hidden="true" tabindex="-1"></a>dates_sejours <span class="ot">&lt;-</span> rum21<span class="sc">$</span>rum <span class="sc">%&gt;%</span> </span>
<span id="cb57-2"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb57-2" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">group_by</span>(nas) <span class="sc">%&gt;%</span></span>
<span id="cb57-3"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb57-3" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">summarise</span>(<span class="at">dtentr =</span> <span class="fu">min</span>(d8eeue),</span>
<span id="cb57-4"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb57-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">dtsor =</span> <span class="fu">max</span>(d8soue)) <span class="sc">%&gt;%</span></span>
<span id="cb57-5"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb57-5" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">ungroup</span>()</span>
<span id="cb57-6"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb57-6" aria-hidden="true" tabindex="-1"></a>dates_sejours</span></code></pre></div>
<p>Réaliser la jointure entre les RUM et les dates d’entrée/sortie du séjours pour faire un calcul du nombre de RUM par mois de sortie du séjour :</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb58-1" aria-hidden="true" tabindex="-1"></a>rum21<span class="sc">$</span>rum <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(dp <span class="sc">==</span> <span class="st">&quot;I10&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(.,dates_sejours) <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moissor =</span> <span class="fu">format</span>(dtsor,<span class="st">&quot;%m&quot;</span>)  ) <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(moissor) <span class="sc">%&gt;%</span></span>
<span id="cb58-5"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nb =</span> <span class="fu">n</span>())</span></code></pre></div>
<p>Par défaut, la jointure est réalisée sur les colonnes qui sont présentes dans les 2 dataframes :</p>
<p>Ne compter que les séjours et non les RUM :</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb59-1" aria-hidden="true" tabindex="-1"></a>rum21<span class="sc">$</span>rum <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(dp <span class="sc">==</span> <span class="st">&quot;I10&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(.,dates_sejours) <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moissor =</span> <span class="fu">format</span>(dtsor,<span class="st">&quot;%m&quot;</span>)  ) <span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(moissor) <span class="sc">%&gt;%</span></span>
<span id="cb59-5"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nb =</span> <span class="fu">length</span>(<span class="fu">unique</span>(nas)))</span></code></pre></div>
<p>Rechercher le diagnostic dans l’ensemble des diagnostics :
1) Rechercher le diagnostic dans les diagnostics associés</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb60-1" aria-hidden="true" tabindex="-1"></a>rum21<span class="sc">$</span>das <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(das <span class="sc">==</span> <span class="st">&quot;I10&quot;</span>) <span class="ot">-&gt;</span> das_i10</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>utiliser ce résultat pour compléter la recherche</li>
</ol>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb61-1" aria-hidden="true" tabindex="-1"></a>rum21<span class="sc">$</span>rum <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(dp <span class="sc">==</span> <span class="st">&quot;I10&quot;</span> <span class="sc">|</span> nas <span class="sc">%in%</span> das_i10<span class="sc">$</span>nas ) <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(.,dates_sejours) <span class="sc">%&gt;%</span></span>
<span id="cb61-3"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moissor =</span> <span class="fu">format</span>(dtsor,<span class="st">&quot;%m&quot;</span>)  ) <span class="sc">%&gt;%</span></span>
<span id="cb61-4"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(moissor) <span class="sc">%&gt;%</span></span>
<span id="cb61-5"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nb =</span> <span class="fu">length</span>(<span class="fu">unique</span>(nas)))</span></code></pre></div>
<p>Faire la même recherche pour les patients qui résident à Paris :</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb62-1" aria-hidden="true" tabindex="-1"></a>rum21<span class="sc">$</span>rum <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(dp <span class="sc">==</span> <span class="st">&quot;I10&quot;</span> <span class="sc">|</span> nas <span class="sc">%in%</span> das_i10<span class="sc">$</span>nas, </span>
<span id="cb62-2"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb62-2" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">substr</span>(cdresi,<span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">==</span> <span class="st">&quot;75&quot;</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(.,dates_sejours) <span class="sc">%&gt;%</span></span>
<span id="cb62-4"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moissor =</span> <span class="fu">format</span>(dtsor,<span class="st">&quot;%m&quot;</span>)  ) <span class="sc">%&gt;%</span></span>
<span id="cb62-5"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(moissor) <span class="sc">%&gt;%</span></span>
<span id="cb62-6"><a href="premiers-pas-avec-les-données-pmsi-importées-avec-pmeasyr.html#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nb =</span> <span class="fu">length</span>(<span class="fu">unique</span>(nas)))</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="language-r-les-fondamentaux.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="pmeasyr-imports-mco.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/pmeasyr-premiers-pas.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
